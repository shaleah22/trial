
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>French Vocabulary Drill</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background-color: #f0f8ff;
            margin: 0;
            padding: 0;
        }
        #levelDisplay {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 1.5em;
            background-color: #ffebcd;
            padding: 10px;
            border-radius: 5px;
        }
        #questionText {
            font-size: 2em;
            margin: 20px;
        }
        #questionImage {
            max-width: 200px;
            max-height: 200px;
            margin: 10px auto;
        }
        input[type="text"] {
            font-size: 1.5em;
            padding: 10px;
            width: 300px;
        }
        #limitReachedForm {
            display: none;
        }
    </style>
</head>
<body>
    <div id="levelDisplay">Level: 1</div>
    <div id="questionText"></div>
    <img id="questionImage" alt="Question Image" style="display:none;">
    <input type="text" id="answerInput" autofocus>
    <form id="limitReachedForm">
        <h2>Daily limit reached</h2>
        <p id="userDetails"></p>
        <button type="button" onclick="submitScore()">Submit</button>
    </form>
    <script>
        const questions = [
            { question: "Bonjour", answer: "Hello" },
            { question: "Merci", answer: "Thank you" },
            { question: "Pomme", answer: "Apple" },
            { question: "Chat", answer: "Cat" },
            { question: "Chien", answer: "Dog" },
            { question: "Livre", answer: "Book" },
            { question: "Rouge", answer: "Red" },
            { question: "Bleu", answer: "Blue" },
            { question: "Vert", answer: "Green" },
            { question: "Fleur", answer: "Flower" },
            { question: "Maison", answer: "House" },
            { question: "Ã‰cole", answer: "School" },
            { question: "Fromage", answer: "Cheese" },
            { question: "Eau", answer: "Water" },
            { question: "Soleil", answer: "Sun" },
            { question: "Lune", answer: "Moon" },
            { question: "Voiture", answer: "Car" },
            { question: "Arbre", answer: "Tree" },
            { question: "Cheval", answer: "Horse" },
            { question: "Oiseau", answer: "Bird" }
        ];

        let currentLevel = 1;
        let questionIndex = 0;
        let sessionTime = 30;
        let currentQuestionSet = [];
        const username = prompt("Please enter your username") || "Guest";
        document.getElementById("levelDisplay").innerText = `Level: ${currentLevel}`;

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        function loadQuestions(level) {
            const startIndex = Math.max(0, level - 1);
            const endIndex = Math.min(questions.length, level + 4);
            currentQuestionSet = questions.slice(startIndex, endIndex);
            shuffleArray(currentQuestionSet);
            questionIndex = 0;
            displayQuestion();
        }

        function displayQuestion() {
            if (questionIndex < currentQuestionSet.length) {
                const currentQuestion = currentQuestionSet[questionIndex];
                document.getElementById("questionText").innerText = currentQuestion.question;
                document.getElementById("answerInput").value = "";
                document.getElementById("answerInput").focus();
            } else {
                currentLevel++;
                loadQuestions(currentLevel);
                document.getElementById("levelDisplay").innerText = `Level: ${currentLevel}`;
            }
        }

        function checkAnswer() {
            const userAnswer = document.getElementById("answerInput").value.trim().toLowerCase();
            const correctAnswer = currentQuestionSet[questionIndex].answer.toLowerCase();
            if (userAnswer === correctAnswer) {
                questionIndex++;
                displayQuestion();
            }
        }

        function startUsageTimer() {
            setTimeout(() => {
                document.getElementById("limitReachedForm").style.display = "block";
                document.getElementById("userDetails").innerText = `${username}, you reached Level ${currentLevel}`;
            }, sessionTime * 1000);
        }

        function submitScore() {
            const url = "https://script.google.com/macros/s/AKfycbzWoE2NrNffSm_AZdAe1sykhKAVelPYaY4rO9GnoBTDvTPAXqPB9gv0-00PvQ16D_kJ/exec";
            fetch(url, {
                method: "POST",
                body: JSON.stringify({ username, level: currentLevel }),
                headers: { "Content-Type": "application/json" }
            }).then(response => alert("Score submitted!"))
            .catch(error => alert("Error submitting score: " + error));
        }

        document.getElementById("answerInput").addEventListener("input", checkAnswer);
        loadQuestions(currentLevel);
        startUsageTimer();
    </script>
</body>
</html>
