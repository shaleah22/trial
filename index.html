<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Review and Fluency Drill</title>
    <style>
        body { font-family: Arial, sans-serif; }
        #levelDisplay { position: absolute; right: 20px; top: 40px; }
        #questionText {
            font-size: 30px; /* Change this value to increase or decrease the font size */
        }
        #questionContainer { margin-top: 60px; }
        
        #questionImage { 
        max-width: 400px; /* Maximum width of the image */
        max-height: 300px; /* Maximum height of the image */
        width: auto; /* Maintain aspect ratio */
        height: auto; /* Maintain aspect ratio */
        display: block; /* Ensures the image is a block-level element */
        margin: 0 auto; /* Center the image */
    }






        
    </style>
</head>
<body>
    <div id="levelDisplay"></div>
    <div id="externalLinkContainer"></div>
    <div id="questionContainer">
        <img id="questionImage" src="" alt="Question Image">
        <p id="questionText"></p>
        <input type="text" id="answerInput" autofocus>
    </div>
    <div id="reelContainer" style="display: none;"></div>
    <div id="mapContainer"></div>

    <!-- User Input Form for Limit Reached -->
    <div id="limitReachedForm" style="display: none;">
        <p>Please enter your details:</p>
        <input type="text" id="userNameInput" placeholder="Your Name" readonly>
        <input type="text" id="userLevelInput" placeholder="Your Current Level" readonly>
        <button onclick="submitDetails()">Submit today's score</button>
    </div>

    <script>

        
        //no right click code
         window.addEventListener('contextmenu', function (e) {
            e.preventDefault();
        }, false);
        
        const questions = [ 




          //area of a triangle
           { question: "Find the area ____ square feet", answer: "6", imageUrl: "https://cdn-academy.pressidium.com/academy/wp-content/uploads/2020/12/FAQ-Area-and-Perimeter-of-a-Triangle-3.png" },

           //proportions
          { question: "To find b, multiply a x c and then divide by ____", answer: "d", imageUrl: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRF6lxzL9jSw5Zjm36Bmsq0_vYMRSj49MlekAuY2wXi5_wWs7nlWyI9Qp8oGEjj9oIQRUA&usqp=CAU" },

        
         { question: "-4 - 5 = ", answer: "-9", imageUrl: "" },

        //8.2 fractions decimals and percents
           { question: "To turn a decimal to a percent move the decimal two places to the _____" , answer: "right", imageUrl: "https://d138zd1ktt9iqe.cloudfront.net/media/seo_landing_files/decimal-to-percent-3-1611293673.png" },


            { question: "7 - (-3) = ", answer: "10", imageUrl: "" },
           

        //7.6 Unit Rate
           { question: "A unit rate will have a ___ in the denominator" , answer: "1", imageUrl: "https://cdn11.bigcommerce.com/s-wpgom64n7v/images/stencil/1280x1280/products/19719/137817/TPT_Unit_Rates_and_Best_Buy_-_Listed_on_TpT_-_Do_Not_Delete_1__78247.1672421800.png?c=2" },


          
                 { question: "In quadrant ___ (1, 2, 3, 4), the X value is negative and the Y value is positive", answer: "2", imageUrl: "https://i0.wp.com/maths.forkids.education/wp-content/uploads/2019/08/graph-quadrant.jpg?ssl=1" },
              



{ question: "- 7 - 6 ", answer: "-13", imageUrl: "" },
{ question: "- 8 - 7 ", answer: "-15", imageUrl: "" },
{ question: "-57 + 57 ", answer: "0", imageUrl: "" },
{ question: "-6 - (-4) ", answer: "-2", imageUrl: "" },
//what could be a value for n
{ question: " ", answer: "a", imageUrl: "https://i.postimg.cc/6q57ZmFs/Screen-Shot-2024-02-18-at-4-49-22-AM.jpg" },
{ question: "The temperature in the late afternoon was -7.5 degrees Celsius. It dropped 8.5 degrees by midnight. What was the temperature at midnight?____ degrees ", answer: "-16", imageUrl: "" },

{ question: "What is greater, -4 or -2? ", answer: "-2", imageUrl: "" },
{ question: "What is the value of -(-65) ", answer: "65", imageUrl: "" },
//which division sentence is shown by the model at the right 2/3 divided by 1/9
{ question: " ", answer: "a", imageUrl: "https://i.postimg.cc/wjN3sbys/Screen-Shot-2024-02-16-at-6-02-46-AM.jpg" },
//marco goes on a recreational scuba diving
{ question: " ", answer: "d", imageUrl: "https://i.postimg.cc/vZX89F8T/Screen-Shot-2024-02-17-at-6-25-17-AM.jpg" },
{ question: "A rational number is any number that can be written as a ______", answer: "fraction", imageUrl: "" },

//numberline rational number
{ question: "What is the value of C? Write answer as a decimal. ", answer: "-1.75", imageUrl: "https://i.postimg.cc/J40tqzgJ/Screen-Shot-2024-02-17-at-6-29-04-AM.jpg" },

//numberline rational number
{ question: "What is the value of A? Write answer as a fraction. ", answer: "-1/2", imageUrl: "https://i.postimg.cc/J40tqzgJ/Screen-Shot-2024-02-17-at-6-29-04-AM.jpg" },

//numberline rational number
{ question: "What is the value of B? Write answer as a fraction. ", answer: "3/4", imageUrl: "https://i.postimg.cc/J40tqzgJ/Screen-Shot-2024-02-17-at-6-29-04-AM.jpg" },



{ question: "What is the reciprocal of 16? ", answer: "1/16", imageUrl: "https://cdn.virtualnerd.com/thumbnails/Alg1_2zi-diagram_thumb-lg.png" },


{ question: "", answer: "a", imageUrl: "https://i.postimg.cc/J4yLrPLZ/Screen-Shot-2024-02-16-at-5-15-47-AM.jpg" },

{ question: " ", answer: "a", imageUrl: "https://i.postimg.cc/3r0h7t7p/Screen-Shot-2024-02-16-at-5-16-09-AM.jpg" },
{ question: " ", answer: "1/2", imageUrl: "https://i.postimg.cc/k5jVrTCz/Screen-Shot-2024-02-16-at-5-19-44-AM.jpg" },
{ question: "3/4 divided by 1/8 = ", answer: "6", imageUrl: "https://i.postimg.cc/mk4WmGqs/Screen-Shot-2024-02-16-at-5-20-43-AM.jpg" },


      
{ question: " ", answer: "b", imageUrl: "https://i.postimg.cc/NfRbPTYj/Screen-Shot-2024-02-15-at-5-01-52-AM.jpg" },
{ question: " ", answer: "b", imageUrl: "https://i.postimg.cc/d0C08qrp/Screen-Shot-2024-02-15-at-5-02-01-AM.jpg" },
{ question: " ", answer: "d", imageUrl: "https://i.postimg.cc/y6cr22yK/Screen-Shot-2024-02-15-at-5-02-31-AM.jpg" },
{ question: "What is the value of ", answer: "-8", imageUrl: "https://i.postimg.cc/tJv1BBTM/Screen-Shot-2024-02-15-at-5-03-42-AM.jpg" },
{ question: " ", answer: "-2", imageUrl: "https://i.postimg.cc/k4BZz4XX/Screen-Shot-2024-02-15-at-5-04-11-AM.jpg" },


  

  //february 27 2024
   

{ question: "4(3 + 7) = 12 + 28 is an example of the <br><br> a) commutative property <br> b) associative property <br> c) distributive property ", answer: "c", imageUrl: "" },


{ question: "-(4x-9) = ", answer: "-4x+9", imageUrl: "" },

{ question: "Write an algebraic expression for <strong>five less than y </strong>", answer: "y-5", imageUrl: "" },
{ question: "How many terms does this expression have? ", answer: "3", imageUrl: "https://i.postimg.cc/15Mq6g6g/Screen-Shot-2024-02-22-at-5-35-14-AM.jpg" },

{ question: "(3 + 4) + 7 = 3 + (4 + 7) is an example of the <br><br> a) commutative property <br> b) associative property <br> c) distributive property ", answer: "b", imageUrl: "" },

{ question: "Name a coefficient in the expression ", answer: "-7", imageUrl: "https://i.postimg.cc/15Mq6g6g/Screen-Shot-2024-02-22-at-5-35-14-AM.jpg" },

{ question: "Name a constant in the expression ", answer: "12.5", imageUrl: "https://i.postimg.cc/15Mq6g6g/Screen-Shot-2024-02-22-at-5-35-14-AM.jpg" },

{ question: "Evaluate 3t - 8 when t = 2 ", answer: "-2", imageUrl: "" },
{ question: "3 + 4 = 4 + 3 is an example of the <br><br> a) commutative property <br> b) associative property <br> c) distributive property ", answer: "a", imageUrl: "" },

{ question: "A ________ number has more than two factors", answer: "composite", imageUrl: "" },

//(-2)^0=?
{ question: " ", answer: "1", imageUrl: "https://i.postimg.cc/YSGCvJKT/Screen-Shot-2024-02-21-at-3-41-17-AM.jpg" },



              //exponents
              { question: "Any number raised to the power of 0 is _____ = ", answer: "1", imageUrl: "https://o.quizlet.com/i/j2mUbui1rGvVIHGfpRO3vg.jpg" },


             
          

            //expressions
              { question: "How many terms does this expression have?", answer: "4", imageUrl: "https://images.squarespace-cdn.com/content/v1/54905286e4b050812345644c/c4bdd683-83a0-4d74-9b75-7011f93bc758/Fig-01.jpg" },


            { question: "Evaluate 4m + 2 when m = 3", answer: "14", imageUrl: "" },

           
           



        ];


        //new code aug 26

        function fetchUserData(userName) {
    const googleAppsScriptURL = 'YOUR_GOOGLE_APPS_SCRIPT_URL';
    fetch(`${googleAppsScriptURL}?userName=${userName}`)
        .then(response => response.json())
        .then(data => {
            currentLevel = parseInt(data.level) || 1;
            localStorage.setItem('currentLevel', currentLevel);
            init();
        })
        .catch(error => {
            console.error('Error fetching user data:', error);
            alert('An error occurred while fetching your progress.');
            init();
        });
}

let userName = localStorage.getItem('userName') || prompt("Enter your name:");
fetchUserData(userName);





        //old code
        let currentLevel = parseInt(localStorage.getItem('currentLevel')) || 1;
        let userName = localStorage.getItem('userName') || prompt("Enter your name:");
        localStorage.setItem('userName', userName);
        let currentQuestionIndex = 0;
        let levelQuestions = [];
        let timer;

        function getTodayString() {
            const now = new Date();
            return now.toISOString().split('T')[0];
        }




        let dailyLimitExceeded = false;



        function startUsageTimer() {
            const today = getTodayString();
            const startTime = localStorage.getItem('drillStartTime');
            const lastUsedDate = localStorage.getItem('lastUsedDate');




             if (lastUsedDate !== today) {
                localStorage.setItem('drillStartTime', Date.now());
                localStorage.setItem('lastUsedDate', today);
                dailyLimitExceeded = false; // Reset daily limit status
            } else if (startTime && (Date.now() - startTime) >= 90000) {
                alert(userName + ", you've reached your daily limit. Please come back tomorrow. Current Level: " + currentLevel);
                dailyLimitExceeded = true;
                
                // Show the input form
                document.getElementById('limitReachedForm').style.display = 'block';
                document.getElementById('userNameInput').value = userName;
                document.getElementById('userLevelInput').value = currentLevel;

                throw new Error("Daily limit reached");
            }
        }


























        function init() {
            startUsageTimer();
            document.getElementById('levelDisplay').innerText = `Level: ${currentLevel}`;
            levelQuestions = shuffleArray(questions.slice(currentLevel - 1, currentLevel + 5));
            currentQuestionIndex = 0;
            startTimer();
            loadNextQuestion();
        }

        function startTimer() {
            clearTimeout(timer);
            timer = setTimeout(function() {
                alert("Time's up!");
                location.reload(); // Reloads the current level
            }, 90000); // 90 seconds for the entire level
        }




        function loadNextQuestion() {
            if (dailyLimitExceeded || currentQuestionIndex >= 5) {
                clearTimeout(timer);
                if (!dailyLimitExceeded) {
                    currentLevel++;
                    localStorage.setItem('currentLevel', currentLevel);
                }
                init();
                return;
            }

            displayQuestion(levelQuestions[currentQuestionIndex]);
        }



       

        function displayQuestion(question) {
            document.getElementById('questionText').innerHTML = question.question;

            const questionImage = document.getElementById('questionImage');
            if (question.imageUrl) {
                questionImage.src = question.imageUrl;
                questionImage.style.display = 'block';
            } else {
                questionImage.style.display = 'none';
            }

            const answerInput = document.getElementById('answerInput');
            answerInput.value = '';
            answerInput.oninput = () => checkAnswer(question.answer, answerInput.value);

            if (question.externalLink) {
                document.getElementById('externalLinkContainer').innerHTML = question.externalLink;
            } else {
                document.getElementById('externalLinkContainer').innerHTML = '';
            }

            const reelContainer = document.getElementById('reelContainer');
            if (question.instagramReel) {
                reelContainer.innerHTML = question.instagramReel;
                reelContainer.style.display = 'block';
            } else {
                reelContainer.style.display = 'none';
            }

            const mapContainer = document.getElementById('mapContainer');
            if (question.map) {
                mapContainer.innerHTML = question.map;
                mapContainer.style.display = 'block';
            } else {
                mapContainer.style.display = 'none';
            }

            // Clear existing timeout and set a new one
            clearTimeout(window.answerTimeout);
            window.answerTimeout = setTimeout(() => {
                if (answerInput.value === '') {
                    alert('The correct answer is: ' + question.answer);
                }
            }, 5000); // 5 seconds delay
        }




       
/*

        function checkAnswer(correctAnswer, userAnswer) {
            clearTimeout(window.answerTimeout); // Clear the timeout if the user answers
            if (userAnswer === correctAnswer) {
                currentQuestionIndex++;
                loadNextQuestion();
            }
        }

*/



        function checkAnswer(correctAnswer, userAnswer) {
            clearTimeout(window.answerTimeout); // Clear the timeout if the user answers
            if (userAnswer === correctAnswer) {
                currentQuestionIndex++;
                loadNextQuestion();
            } else {
                // Show the correct answer after 5 seconds
                window.answerTimeout = setTimeout(() => {
                    alert('The correct answer is: ' + correctAnswer);
                    loadNextQuestion(); // Load the next question even if the answer is incorrect
                }, 5000);
            }
        }

       

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function submitDetails() {
    var userName = document.getElementById('userNameInput').value;
    var userLevel = document.getElementById('userLevelInput').value;
    var formData = {
        'name': userName,
        'level': userLevel
    };

    var googleAppsScriptURL = 'https://script.google.com/macros/s/AKfycbyqK4Wm7ESZ_q_2xkwvePZOb8SLrPlOqKyPxSdS_7DB6RdWNOPXk3DHveKvYxAMckEx/exec';

    fetch(googleAppsScriptURL, {
        method: 'POST',
        cache: 'no-cache',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify(formData)
    })
    .then(response => response.json())
    .then(data => {
        console.log('Success:', data);
        alert('Details submitted successfully.');
    })
    .catch(error => {
        console.error('Error:', error);
        alert('An error occurred while submitting details.');
    });

    document.getElementById('limitReachedForm').style.display = 'none';
}











        init();


        // JavaScript code remains unchanged
        // ...
    </script>
</body>
</html>
